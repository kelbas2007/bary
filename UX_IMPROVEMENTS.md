# –£–ª—É—á—à–µ–Ω–∏—è UX –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –î–∞—Ç–∞: 19.11.2024

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:

1. **–ù–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∏ XP**
2. **–ù–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Ä–æ–∫–∏ –∏ —Ç–µ—Å—Ç—ã**
3. **–ë–∞—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–º–Ω—ã–π –∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**
4. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä –ø–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é**

---

## üìä 1. –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏ XP

### –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LevelXpDisplay.kt`

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ –∑–≤–µ–∑–¥–æ—á–∫–æ–π ‚≠ê
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä XP –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ XP –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
- –ò–º–µ–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ö–µ–¥–µ—Ä–µ

**–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (BalanceScreen) - –ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –¥–µ—Ç–∞–ª—è–º–∏
- –î—Ä—É–≥–∏–µ —ç–∫—Ä–∞–Ω—ã - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è

**–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ XP:**
```kotlin
requiredXp = 100 * 1.25^(level - 1)
```

---

## üéÅ 2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥

### –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RewardPopup.kt`

**–ù–∞–≥—Ä–∞–¥—ã –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è:**

| –î–µ–π—Å—Ç–≤–∏–µ | XP –Ω–∞–≥—Ä–∞–¥–∞ | –ê–Ω–∏–º–∞—Ü–∏—è |
|----------|-----------|----------|
| –ü—Ä–æ—á–∏—Ç–∞–ª —É—Ä–æ–∫ | +3 XP | - |
| –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —Ç–µ—Å—Ç–µ | +10 XP | - |
| –ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç –Ω–∞ 80%+ | +50 XP | üèÜ –ó–æ–ª–æ—Ç–æ–π –∫—É–±–æ–∫ |
| –ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç –Ω–∞ 60-79% | +30 XP | üèÜ –°–µ—Ä–µ–±—Ä—è–Ω—ã–π –∫—É–±–æ–∫ |
| –ü—Ä–æ—à–µ–ª —Ç–µ—Å—Ç <60% | +15 XP | üéñÔ∏è –£—á–∞—Å—Ç–∏–µ |
| –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è | - | ‚≠ê –ê–Ω–∏–º–∞—Ü–∏—è –∑–≤–µ–∑–¥—ã |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö—Ä–∞—Å–∏–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è 3 —Å–µ–∫—É–Ω–¥—ã
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ XP
- –û—Å–æ–±–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è

---

## üéì 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä —Å –ë–∞—Ä–∏

### –°–æ–∑–¥–∞–Ω `BariTutorialManager.kt`

**–®–∞–≥–∏ —Ç—É—Ä–∞:**

1. **WELCOME** - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–π—Ç–∏ —Ç—É—Ä
2. **BALANCE_EXPLAIN** - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
3. **LEVEL_XP_EXPLAIN** - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —É—Ä–æ–≤–Ω–µ–π –∏ XP
4. **ADD_INCOME** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥
5. **ADD_EXPENSE** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥
6. **BARI_CORE_INTRO** - –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –¥–µ—Ä–µ–≤–æ–º –Ω–∞–≤—ã–∫–æ–≤
7. **QUESTS_INTRO** - –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –∫–≤–µ—Å—Ç–∞–º–∏
8. **LESSONS_INTRO** - –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å —É—Ä–æ–∫–∞–º–∏
9. **COMPLETED** - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—É—Ä–∞

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç—É—Ä
- –¢—É—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ DataStore)
- –ö–∞–∂–¥—ã–π —à–∞–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é

### –°–æ–∑–¥–∞–Ω `TutorialOverlay.kt`

**UI –¥–ª—è —Ç—É—Ä–∞:**
- –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- –ö—Ä–∞—Å–∏–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –ë–∞—Ä–∏
- –ö–Ω–æ–ø–∫–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –∏ "–î–∞–ª–µ–µ"
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è

---

## ü§ñ 4. –£–º–Ω—ã–π –ë–∞—Ä–∏ - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏

### –°–æ–∑–¥–∞–Ω `SmartBariHints.kt`

**–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç:**
- –£—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (1-10+)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ XP
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤
- –¢–µ–∫—É—â–µ–≥–æ —ç–∫—Ä–∞–Ω–∞

**–¢–∏–ø—ã –ø–æ–¥—Å–∫–∞–∑–æ–∫:**

#### –ü–æ —ç–∫—Ä–∞–Ω–∞–º:
- **Balance** - —Å–æ–≤–µ—Ç—ã –æ –±–∞–ª–∞–Ω—Å–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
- **BariCore** - –º–æ—Ç–∏–≤–∞—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—ã–∫–∏
- **Quests** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∫–≤–µ—Å—Ç–∞—Ö
- **Lessons** - –ø—Ä–∏–∑—ã–≤ –ø—Ä–æ–π—Ç–∏ —É—Ä–æ–∫–∏

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ:
- **FirstTransaction** - –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å—å—é
- **LowXp** - —Å–æ–≤–µ—Ç –∫–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å XP
- **NoTransactions** - –ø—Ä–∏–∑—ã–≤ –Ω–∞—á–∞—Ç—å
- **LevelUp** - –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –ø–æ–≤—ã—à–µ–Ω–∏–µ–º —É—Ä–æ–≤–Ω—è
- **QuizFailed** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
- **QuizPerfect** - –ø–æ—Ö–≤–∞–ª–∞ –∑–∞ –∏–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–§—É–Ω–∫—Ü–∏–∏:**
- `getContextualHint()` - —É–º–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- `getMotivationalMessage()` - –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `getNextStepHint()` - —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### BalanceScreen
```kotlin
item { LevelXpDisplay(level = uiState.level, currentXp = uiState.currentXp) }
```

### BalanceViewModel
```kotlin
data class BalanceUiState(
    // ...
    val currentXp: Int = 0, // –î–æ–±–∞–≤–ª–µ–Ω–æ
    // ...
)
```

### QuizViewModel
```kotlin
// –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
val xpReward = when {
    finalScore >= 80 -> 50 // –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    finalScore >= 60 -> 30 // –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    else -> 15 // –£—á–∞—Å—Ç–∏–µ
}
gamificationRepository.addXp(xpReward)
```

### LessonDetailViewModel
```kotlin
// –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —á—Ç–µ–Ω–∏–µ —É—Ä–æ–∫–∞
gamificationRepository.addXp(3)
```

### SettingsRepository / SettingsDataStore
```kotlin
// –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—É—Ä–∞
fun hasCompletedTutorial(): Flow<Boolean>
suspend fun saveTutorialCompleted(completed: Boolean)
```

---

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ª—É—á—à–µ–Ω–∏–µ –º–æ—Ç–∏–≤–∞—Ü–∏–∏:
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å (—É—Ä–æ–≤–µ–Ω—å –∏ XP)  
‚úÖ –ß–µ—Ç–∫–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ  
‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
‚úÖ –ë–∞—Ä–∏ –¥–∞–µ—Ç —É–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç  

### Gamification loop:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Üí **–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å**
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ (—É—Ä–æ–∫/—Ç–µ—Å—Ç) ‚Üí **–ø–æ–ª—É—á–∞–µ—Ç XP –∏ –Ω–∞–≥—Ä–∞–¥—É**
3. –ü–æ–≤—ã—à–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å ‚Üí **—Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
4. –ë–∞—Ä–∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ ‚Üí **—Ü–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è**

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã UX

1. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç –≥–¥–µ –æ–Ω –∏ –∫—É–¥–∞ –∏–¥–µ—Ç
2. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –Ω–∞–≥—Ä–∞–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å—Ä–∞–∑—É
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ** - –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–º—É
4. **–£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫** - –ë–∞—Ä–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. **–ú–æ—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è** - —á–µ—Ç–∫–∏–µ —Ü–µ–ª–∏ –∏ –Ω–∞–≥—Ä–∞–¥—ã

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
- [ ] –°–æ–∑–¥–∞—Ç—å —ç–∫—Ä–∞–Ω "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è" —Å–æ –∑–Ω–∞—á–∫–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ (–µ—Å–ª–∏ –±—É–¥–µ—Ç multi-user)
- [ ] –î–æ–±–∞–≤–∏—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –ë–∞—Ä–∏





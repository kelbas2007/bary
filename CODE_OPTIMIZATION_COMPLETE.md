# ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω–æ (—É–±—Ä–∞—Ç—å —Ç–µ—Ö–¥–æ–ª–≥)

#### 1. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö DAO

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–µ –ø–∞–ø–∫–∏ —Å DAO:
- `data/local/dao/` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `AppDatabase`
- `data/local/room/` ‚Äî –ø—É—Å—Ç—ã–µ/–Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã

**–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ `data/local/room/` –ø–æ–ª–Ω–æ—Å—Ç—å—é.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- –£–±—Ä–∞–Ω –º—ë—Ä—Ç–≤—ã–π –∫–æ–¥
- –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

---

#### 2. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–µ–π Entity/Model

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–≤–µ –ø–∞–ø–∫–∏ —Å –º–æ–¥–µ–ª—è–º–∏:
- `data/model/` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Room (—Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ `@Entity`)
- `data/local/entities/` ‚Äî –¥—É–±–ª–∏ —Å—Ç–∞—Ä—ã—Ö –º–æ–¥–µ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞ `data/local/entities/` –ø–æ–ª–Ω–æ—Å—Ç—å—é.

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏ –º–æ–¥–µ–ª–µ–π
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- –£–ø—Ä–æ—â–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–¥–∞

---

#### 3. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ GameEvent —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: `GameEvent` —Å–æ–¥–µ—Ä–∂–∞–ª —Ç–æ–ª—å–∫–æ 2 —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏–π (`LevelUp`, `AchievementUnlocked`).

**–†–µ—à–µ–Ω–∏–µ**: –†–∞—Å—à–∏—Ä–µ–Ω `GameEvent` –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```kotlin
sealed class GameEvent {
    // –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è - –ü—Ä–æ–≥—Ä–µ—Å—Å
    data class LevelUp(val newLevel: Int) : GameEvent()
    data class AchievementUnlocked(val achievementName: String) : GameEvent()
    
    // –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è - –ö–≤–µ—Å—Ç—ã –∏ –ù–∞–≤—ã–∫–∏
    data class QuestCompleted(val questId: String, val xpReward: Int) : GameEvent()
    data class SkillUnlocked(val skillId: String) : GameEvent()
    
    // –û–±—É—á–µ–Ω–∏–µ
    data class LessonCompleted(val lessonId: String, val xpReward: Int) : GameEvent()
    data class QuizCompleted(val quizId: String, val score: Int, val xpReward: Int) : GameEvent()
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**:
- `GamificationRepository.unlockSkill()` ‚Äî —Ç–µ–ø–µ—Ä—å —ç–º–∏—Ç–∏—Ç `GameEvent.SkillUnlocked`
- `GamificationRepository.completeQuest()` ‚Äî —Ç–µ–ø–µ—Ä—å —ç–º–∏—Ç–∏—Ç `GameEvent.QuestCompleted`
- `BariViewModel.listenToGameEvents()` ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è
- –õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bari

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–£–¥–∞–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: ~13 (–ø–∞–ø–∫–∏ `room/` –∏ `entities/`)
- **–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 3
  - `GameEvent.kt` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω
  - `GamificationRepository.kt` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —ç–º–∏—Ç—ã —Å–æ–±—ã—Ç–∏–π
  - `BariViewModel.kt` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π

---

## üîÑ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)

### 4. ‚è∏Ô∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ BariSmartHints

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: `BariSmartHints.kt` ‚Äî ~235 —Å—Ç—Ä–æ–∫, –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –æ–±—ä–µ–∫—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º `when`/`if`.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ö–æ–≥–¥–∞ —Ñ–∞–π–ª –ø—Ä–µ–≤—ã—Å–∏—Ç 300 —Å—Ç—Ä–æ–∫, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –Ω–∞ —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

```kotlin
interface BariHintProvider {
    fun canHandle(route: String, context: BariContext): Boolean
    fun getHint(context: BariContext): String
}

object BariHintRegistry {
    private val providers = listOf(
        BalanceHintProvider(),
        PiggyBankHintProvider(),
        // ...
    )
}
```

**–ö–æ–≥–¥–∞ –¥–µ–ª–∞—Ç—å**: –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 300+ —Å—Ç—Ä–æ–∫.

---

### 5. ‚è∏Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ GamificationEngine

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –õ–æ–≥–∏–∫–∞ –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –º–µ–∂–¥—É:
- `GamificationRepository` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ XP, skills, quests
- –†–∞–∑–ª–∏—á–Ω—ã–µ ViewModels ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–≥—Ä–∞–¥
- `BariEventBus` ‚Äî —Ä–µ–∞–∫—Ü–∏–∏ UI

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –°–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö ViewModels:

```kotlin
interface GamificationEngine {
    suspend fun onEvent(event: GameEvent)
    suspend fun checkQuests()
    suspend fun checkAchievements()
}
```

**–ö–æ–≥–¥–∞ –¥–µ–ª–∞—Ç—å**: –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏.

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ —Ö–æ—Ä–æ—à–æ

1. **BariTrigger sealed interface** ‚Äî –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –∫–æ–ª–ª–µ–≥–∞ ‚úÖ
2. **BariEventBus** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π ‚úÖ
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ ViewModels** –ø–æ —Ñ–∏—á–∞–º ‚úÖ
4. **MVVM + Hilt** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ
5. **MainViewModel** ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π, –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω ‚úÖ

---

## üéØ –ò—Ç–æ–≥–∏

–í—Å–µ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏** –∏–∑ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –ø–∞–ø–∫–∏ (`room/`, `entities/`)
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ `GameEvent` –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `BariViewModel` –∏ `GamificationRepository`
- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–°—Ä–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏** –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `BariSmartHints` (–∫–æ–≥–¥–∞ >300 —Å—Ç—Ä–æ–∫)
- –°–æ–∑–¥–∞–Ω–∏–µ `GamificationEngine` (–µ—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

1. **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –º—ë—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤**: –ï—Å–ª–∏ —Ñ–∞–π–ª –ø—Ä–µ–≤—ã—à–∞–µ—Ç 300 —Å—Ç—Ä–æ–∫ ‚Äî –ø–æ–¥—É–º–∞—Ç—å –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ**




